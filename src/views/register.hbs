<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-10 col-lg-8 col-xl-7">
      <div class="card shadow-lg">
        <div class="card-body p-5">
          <div class="text-center mb-4">
            <h2 class="card-title text-primary">
              <i class="fas fa-user-plus me-2"></i>
              Crear Cuenta
            </h2>
            <p class="text-muted">Únete a nuestro sistema - Passport.js + GitHub</p>
          </div>

        {{#if error}}
          <div
            class="alert alert-danger alert-dismissible fade show"
            role="alert"
          >
            <i class="fas fa-exclamation-triangle me-2"></i>
            {{error}}
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
            ></button>
          </div>
        {{/if}}

        <form action="/auth/register" method="POST" novalidate>
          <div class="row g-4">
            <div class="col-sm-6">
              <div class="mb-3">
                <label for="firstName" class="form-label">
                  <i class="fas fa-user me-2"></i>
                  Nombre
                </label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  id="firstName"
                  name="firstName"
                  placeholder="Tu nombre"
                  required
                  autocomplete="given-name"
                  value="{{firstName}}"
                />
                <div class="invalid-feedback">
                  Por favor ingresa tu nombre
                </div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="mb-3">
                <label for="lastName" class="form-label">
                  <i class="fas fa-user me-2"></i>
                  Apellido
                </label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  id="lastName"
                  name="lastName"
                  placeholder="Tu apellido"
                  required
                  autocomplete="family-name"
                  value="{{lastName}}"
                />
                <div class="invalid-feedback">
                  Por favor ingresa tu apellido
                </div>
              </div>
            </div>
          </div>

          <div class="row g-4">
            <div class="col-sm-8">
              <div class="mb-3">
                <label for="email" class="form-label">
                  <i class="fas fa-envelope me-2"></i>
                  Correo Electrónico
                </label>
                <input
                  type="email"
                  class="form-control form-control-lg"
                  id="email"
                  name="email"
                  placeholder="correo@ejemplo.com"
                  required
                  autocomplete="email"
                  value="{{email}}"
                />
                <div class="invalid-feedback">
                  Por favor ingresa un correo válido
                </div>
              </div>
            </div>
            <div class="col-sm-4">
              <div class="mb-3">
                <label for="age" class="form-label">
                  <i class="fas fa-birthday-cake me-2"></i>
                  Edad
                </label>
                <input
                  type="number"
                  class="form-control form-control-lg"
                  id="age"
                  name="age"
                  placeholder="Tu edad"
                  min="18"
                  max="120"
                  required
                  value="{{age}}"
                />
                <div class="invalid-feedback">
                  Por favor ingresa una edad válida (18-120 años)
                </div>
              </div>
            </div>
          </div>

          <div class="mb-4">
            <label for="password" class="form-label">
              <i class="fas fa-lock me-2"></i>
              Contraseña
            </label>
            <div class="input-group input-group-lg">
              <input
                type="password"
                class="form-control"
                id="password"
                name="password"
                placeholder="Mínimo 6 caracteres"
                required
                minlength="6"
                autocomplete="new-password"
              />
              <button
                class="btn btn-outline-secondary"
                type="button"
                id="togglePassword"
                onclick="togglePasswordVisibility()"
              >
                <i class="fas fa-eye" id="eyeIcon"></i>
              </button>
            </div>
            <div class="invalid-feedback">
              La contraseña debe tener al menos 6 caracteres
            </div>
            <div class="form-text mt-2">
              <i class="fas fa-info-circle me-2"></i>
              La contraseña debe tener al menos 6 caracteres
            </div>
          </div>

          <div class="d-grid mb-4">
            <button type="submit" class="btn btn-primary btn-lg">
              <i class="fas fa-user-plus me-2"></i>
              Crear Cuenta
            </button>
          </div>
        </form>

        <hr class="my-4" />

        <!-- GitHub OAuth Button -->
        <div class="d-grid mb-4">
          <a href="/auth/github" class="btn btn-dark btn-lg">
            <i class="fab fa-github me-2"></i>
            Registrarse con GitHub
          </a>
        </div>

        <hr class="my-4" />

        <div class="text-center">
          <p class="mb-0">¿Ya tienes una cuenta?</p>
          <a href="/login" class="btn btn-link text-primary">
            <i class="fas fa-sign-in-alt me-1"></i>
            Iniciar sesión
          </a>
        </div>

        <!-- Información del sistema -->
        <div class="alert alert-light mt-4" role="alert">
          <strong><i class="fas fa-info-circle me-2"></i>Sistema de registro:</strong><br />
          <small class="text-muted">
            • Autenticación con Passport.js + bcrypt<br />
            • Registro local o con GitHub OAuth<br />
            • Sesiones seguras en MongoDB Atlas
          </small>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  body {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    padding: 40px 0;
  }
  
  .card {
    border: none;
    border-radius: 15px;
    backdrop-filter: blur(10px);
    background: rgba(255, 255, 255, 0.95);
  }
  
  .btn-primary {
    background: linear-gradient(45deg, #667eea, #764ba2);
    border: none;
    border-radius: 8px;
    padding: 12px;
    font-weight: 600;
    transition: all 0.3s ease;
  }
  
  .btn-primary:hover {
    background: linear-gradient(45deg, #5a67d8, #6b46c1);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
  }
  
  .btn-dark {
    background: linear-gradient(45deg, #2d3748, #1a202c);
    border: none;
    border-radius: 8px;
    padding: 12px;
    font-weight: 600;
    transition: all 0.3s ease;
  }
  
  .btn-dark:hover {
    background: linear-gradient(45deg, #1a202c, #2d3748);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(45, 55, 72, 0.3);
  }
  
  .form-control {
    border-radius: 8px;
    border: 2px solid #e2e8f0;
    padding: 14px 18px;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.95);
    font-size: 1rem;
  }

  .form-control-lg {
    padding: 16px 20px;
    font-size: 1.1rem;
  }
  
  .form-control:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
    background: rgba(255, 255, 255, 1);
    transform: translateY(-1px);
  }
  
  .form-label {
    font-weight: 600;
    color: #2d3748;
    margin-bottom: 8px;
  }
  
  .form-label i {
    color: #667eea;
  }
  
  .input-group-text, .btn-outline-secondary {
    border: 2px solid #e2e8f0;
    border-left: none;
    border-radius: 0 8px 8px 0;
    background: rgba(248, 250, 252, 0.8);
  }
  
  .btn-outline-secondary:hover {
    background: #667eea;
    border-color: #667eea;
    color: white;
  }
  
  .alert-light {
    background: rgba(248, 250, 252, 0.8);
    border: 1px solid rgba(226, 232, 240, 0.8);
    border-radius: 10px;
  }
  
  .alert-danger {
    background: rgba(254, 226, 226, 0.9);
    border: 1px solid rgba(252, 165, 165, 0.8);
    border-radius: 10px;
    color: #991b1b;
  }
  
  .card-title {
    font-weight: 700;
    font-size: 1.8rem;
  }
  
  .btn-link {
    font-weight: 600;
    text-decoration: none;
  }
  
  .btn-link:hover {
    text-decoration: underline;
    transform: translateY(-1px);
  }
  
  /* Animaciones suaves */
  .card {
    animation: slideUp 0.6s ease-out;
  }
  
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Mejora en espaciado */
  .row.g-4 {
    margin-bottom: 1.5rem;
  }

  .mb-3 {
    margin-bottom: 1.5rem !important;
  }

  .mb-4 {
    margin-bottom: 2rem !important;
  }
  
  /* Estilos para el campo de edad */
  input[type="number"] {
    -moz-appearance: textfield;
  }
  
  input[type="number"]::-webkit-outer-spin-button,
  input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
</style>

<script>
  // Toggle para mostrar/ocultar contraseña
  function togglePasswordVisibility() {
    const passwordInput = document.getElementById('password');
    const eyeIcon = document.getElementById('eyeIcon');
    
    if (passwordInput.type === 'password') {
      passwordInput.type = 'text';
      eyeIcon.classList.remove('fa-eye');
      eyeIcon.classList.add('fa-eye-slash');
    } else {
      passwordInput.type = 'password';
      eyeIcon.classList.remove('fa-eye-slash');
      eyeIcon.classList.add('fa-eye');
    }
  }

  // Validación mejorada del formulario
  (function() {
    'use strict';
    
    const forms = document.querySelectorAll('form');
    
    Array.from(forms).forEach(function(form) {
      form.addEventListener('submit', function(event) {
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
        }
        
        form.classList.add('was-validated');
      }, false);
    });

    // Validación en tiempo real para mejor UX
    const inputs = document.querySelectorAll('input');
    inputs.forEach(input => {
      input.addEventListener('blur', function() {
        if (this.value.trim() !== '') {
          this.classList.add('is-valid');
          this.classList.remove('is-invalid');
        }
      });

      input.addEventListener('input', function() {
        if (this.classList.contains('was-validated')) {
          if (this.checkValidity()) {
            this.classList.add('is-valid');
            this.classList.remove('is-invalid');
          } else {
            this.classList.add('is-invalid');
            this.classList.remove('is-valid');
          }
        }
      });
    });

    // Animación suave al cargar
    document.addEventListener('DOMContentLoaded', function() {
      const card = document.querySelector('.card');
      card.style.opacity = '0';
      card.style.transform = 'translateY(30px)';
      
      setTimeout(() => {
        card.style.transition = 'all 0.6s ease-out';
        card.style.opacity = '1';
        card.style.transform = 'translateY(0)';
      }, 100);
    });
  })();
</script>